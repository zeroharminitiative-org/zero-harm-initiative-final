<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Dynamic Features - Zero Harm Initiative</title>
    <link rel="stylesheet" href="dynamic-content-styles.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        h1 {
            color: #1D594E;
            text-align: center;
        }
        h2 {
            color: #333;
            border-bottom: 2px solid #4CAF50;
            padding-bottom: 10px;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
        }
        .status.success {
            background: #c8e6c9;
            color: #2e7d32;
        }
        .status.error {
            background: #ffcdd2;
            color: #c62828;
        }
        .status.info {
            background: #e1f5fe;
            color: #0277bd;
        }
    </style>
</head>
<body>
    <h1>Dynamic Features Test Page</h1>
    
    <div class="test-section">
        <h2>Feature Checklist</h2>
        <div id="feature-status"></div>
    </div>

    <div class="test-section">
        <h2>1. News Feed</h2>
        <div id="dynamic-news"></div>
    </div>

    <div class="test-section">
        <h2>2. Active Petitions</h2>
        <div id="dynamic-petitions"></div>
    </div>

    <div class="test-section">
        <h2>3. Local Shelters (ZIP Code Search)</h2>
        <div id="dynamic-shelters"></div>
    </div>

    <div class="test-section">
        <h2>4. Upcoming Events</h2>
        <div id="dynamic-events"></div>
    </div>

    <div class="test-section">
        <h2>5. Active Campaigns</h2>
        <div id="dynamic-campaigns"></div>
    </div>

    <script src="dynamic-content.js"></script>
    <script>
        // Test verification script
        document.addEventListener('DOMContentLoaded', () => {
            const statusDiv = document.getElementById('feature-status');
            
            // Check all features
            const features = [
                { name: 'Dynamic Content Manager', test: () => typeof DynamicContentManager !== 'undefined' },
                { name: 'News Section', test: () => document.getElementById('dynamic-news') !== null },
                { name: 'Petitions Section', test: () => document.getElementById('dynamic-petitions') !== null },
                { name: 'Shelters Section', test: () => document.getElementById('dynamic-shelters') !== null },
                { name: 'Events Section', test: () => document.getElementById('dynamic-events') !== null },
                { name: 'Campaigns Section', test: () => document.getElementById('dynamic-campaigns') !== null },
                { name: 'Location Services', test: () => 'geolocation' in navigator },
                { name: 'Cache System', test: () => dynamicContent && dynamicContent.cache instanceof Map },
                { name: 'ZIP Code Search', test: () => document.getElementById('zipcode-input') !== null }
            ];

            let html = '<ul>';
            features.forEach(feature => {
                const passed = feature.test();
                html += `<li class="status ${passed ? 'success' : 'error'}">
                    ${feature.name}: ${passed ? '✓ Working' : '✗ Not working'}
                </li>`;
            });
            html += '</ul>';
            
            statusDiv.innerHTML = html;

            // Log cache status
            setTimeout(() => {
                if (dynamicContent && dynamicContent.cache) {
                    const cacheInfo = `<div class="status info">
                        Cache Status: ${dynamicContent.cache.size} items cached
                    </div>`;
                    statusDiv.innerHTML += cacheInfo;
                }
            }, 2000);
        });
    </script>
</body>
</html>